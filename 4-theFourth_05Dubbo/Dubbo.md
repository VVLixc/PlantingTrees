# Dubbo  0912

## Dubbo基础

> Dubbo是开发分布式应用经常使用到的一个RPC框架。

### 分布式基础理论

> ==分布式系统定义：==
>
> * 分布式系统是若干台独立计算机的集合，这些计算机对于用户来讲就像是单个相关系统。
> * 分布式系统（Distributed System）是建立在网络之上的软件系统
> * 随着互联网的发展，网站应用的规模不断扩大，常规的垂直应用架构已无法应对，分布式服务架构以及流动计算架构势在必行，亟需一个治理系统确保架构有条不紊的演进。
>
> ==发展演变：==
>
> * 单一应用架构（All in One---ORM）：
>   * 扩展问题：
>     * 修改应用某一个功能，都要将应用重新打包，重新部署在服务器
>   * 协同开发问题
>   * 应用的规模不断扩大问题：
>     * 服务器压力巨大
> * 垂直应用架构（Vertical Application---MVC）：
>   * 优势：
>     * 分工合作
>     * 性能扩展
>   * 局限性：
>     * 界面 + 业务逻辑的实现  无法分离
>     * 应用不可能完全独立，大量的应用之间需要交互
> * 分布式服务架构（Distributed Service---RPC）：
>   * 当垂直应用架构中应用越来越多，各应用还需要互相交互；就可以将它们的核心业务单独抽取出来。用于提高业务复用及整合的分布式服务框架（RPC）是关键。
>     * 比如将用户应用抽取为用户的界面和用户业务、订单的界面和订单的业务...
>   * 优势：
>     * 当业务逻辑不变，只想改界面，就可以单独修改界面应用服务器；核心业务逻辑在其它服务器不受影响。
>   * RPC（Remote Procedure Call远程过程调用）：
>     * 由于使用分布式服务架构定义的各个应用，那么各应用之间的调用就不会是在同一台服务器之间的“进程内通讯”了，而是RPC远程过程调用。
> * 流动计算架构（Elastic Computing---SOA）：
>   * 当服务越来越多，容量的评估、小服务资源的浪费等问题逐渐显现，此时就需要增加一个调度中心**基于访问压力实时管理集群容量，提高集群利用率。**
>     * 用于提高机器利用率的资源调度和治理中心（SOA---Service Oriented Architecture）是关键。
>     * 调度、治理中心。
>
> ==RPC：==
>
> * 什么是RPC：
>   * Remote Procedure Call远程过程调用，是一种进程间通信方式，它是一种技术的思想，而不是规范。
>   * 它允许程序调用另一个地址空间（通常是共享网络的另一台服务器上）的过程或函数，而不用程序员显示编码这个远程调用的细节。
>     * 即程序员无论是调用本地还是远程的函数，本质上编写的调用代码基本相同。
>   * RPC两个核心模块：
>     * 通讯、序列化。
>       * 这两个模块决定了RPC框架的性能。
>         * 例如使用XML肯定没有JSON进行序列化和反序列化快。
> * RPC框架：
>   * Dubbo、gRPC（Google）、Thrift（Facebook）、HSF（High Speed Service Framework）



### Dubbo核心概念

> ==简介：==
>
> * https://cn.dubbo.apache.org/zh-cn/
>
> * Dubbo是由阿里推出的一款高性能、轻量级的开源Java RPC框架（分布式服务框架），它提供了三大核心能力：
>   * 面向接口的远程方法调用
>   * 智能容错和负载均衡
>   * 服务自动注册和发现。
>     * 注册中心
>     * 支持多种注册中心服务，服务实例上下线实时感知
>   * 运行期间流量调度
>     * 通过配置不同路由规则，实现灰度发布（比如100台用户应用服务器，新上线的功能先部署在20台服务器；没问题再部署上一些，直至全部更新；由旧服务转为新服务的过程就是灰度发布）
>
> ==基本概念：==
>
> * Registry：注册中心
> * Provider：服务提供者
> * Consumer：服务消费者
> * Container：Dubbo框架容器
> * Monitor：监控中心



### Dubbo环境搭建

> Zookeeper安装：
>
> * Zookeeper是高可用的分布式协调组件（开源），提供了分布式去中心化数据一致性的能力
> * 这里只是作为一个注册中心来使用。



### Dubbo---Hello World

> * 将服务提供者注册到注册中心
>   * 导入Dubbo依赖（3.2）、引入操作Zookeeper的客户端（curator）
>   * 配置服务提供者
> * 让服务消费者在注册中心订阅服务提供者的服务地址



### 监控中心

> Dubbo Admin：
>
> * 更好的可视化Dubbo服务而设计的控制台（Dubbo Admin 管理控制台）
>
> Dubbo Monitor Simple：
>
> * 简单的监控中心
>
> * 用于监控服务调用的相关信息
>
> * ```xml
>   <dubbo:monitor protocol="registry"/>
>   ```
>
> * 
>





### 整合SpringBoot

> 配置服务提供者：
>
> * 导入依赖
>   * 导入dubbo-starter
>   * 导入dubbo其他依赖（操作Zookeeper的curator）
> * application配置文件
>   * 指定当前应用的名字
>   * 指定注册中心的位置
>   * 指定通信规则
>   * 声明需要暴露的服务接口---不再配置
>     * 在需要暴露的服务接口上方添加@Service注解
>       * 该注解是dubbo的注解
> * 主程序@EnableDubbo开启基于注解的Dubbo功能
>   * 配置文件若配置了dubbo.scan.base-packages就不用该注解
>
> 配置服务消费者：
>
> * 导入依赖
> * application配置文件
>   * 指定当前应用名
>   * 指定注册中心位置
>   * 声明要引用的远程服务的接口---不再配置
>     * @Autowired更换为Dubbo提供的@Reference注解
>       * 远程引用被注解修饰的服务---从注册中心发现
> * 主程序@EnableDubbo开启基于注解的Dubbo功能
>   * 配置文件若配置了dubbo.scan.base-packages就不用该注解





## Dubbo配置









## 高可用











## Dubbo原理





































# 末尾